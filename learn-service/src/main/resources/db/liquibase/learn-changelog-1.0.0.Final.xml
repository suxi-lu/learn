<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<databaseChangeLog xmlns="http://www.liquibase.org/xml/ns/dbchangelog" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-3.2.xsd">

    <changeSet author="lu_it_work@163.com" id="uaa-changelog-1.0.0.Final">

        <preConditions onSqlOutput="TEST" onFail="MARK_RAN">
            <not>
                <changeSetExecuted id="1.0.0.Final" author="lu_it_work@163.com" changeLogFile="db/liquibase/learn-changelog-1.0.0.Final.xml"/>
            </not>
        </preConditions>

        <createTable tableName="uaa_user_login_log" remarks="用户登录日志">
            <column name="id" type="VARCHAR(32)">
                <constraints nullable="false"/>
            </column>
            <column name="user_code" type="VARCHAR(30)" remarks="用户代码"><constraints nullable="false"/></column>
            <column name="user_code" type="VARCHAR(30)" remarks="用户代码"><constraints nullable="false"/></column>
            <column name="user_code" type="VARCHAR(30)" remarks="用户代码"><constraints nullable="false"/></column>
            <column name="user_code" type="VARCHAR(30)" remarks="用户代码"><constraints nullable="false"/></column>
            <column name="user_code" type="VARCHAR(30)" remarks="用户代码"><constraints nullable="false"/></column>
            <column name="user_code" type="VARCHAR(30)" remarks="用户代码"><constraints nullable="false"/></column>
            <column name="user_code" type="VARCHAR(30)" remarks="用户代码"><constraints nullable="false"/></column>
            <column name="user_code" type="VARCHAR(30)" remarks="用户代码"><constraints nullable="false"/></column>
            <column name="user_code" type="VARCHAR(30)" remarks="用户代码"><constraints nullable="false"/></column>
            <column name="login_ip" type="INT(10)" remarks="登录ip">
                <constraints nullable="false"/>
            </column>

            <column name="tenant_id" type="VARCHAR(32)" remarks="租户id">
                <constraints nullable="false"/>
            </column>
            <column name="office_code" type="VARCHAR(30)" remarks="组织代码">
                <constraints nullable="false"/>
            </column>
            <column name="created_by" type="VARCHAR(100)" remarks="创建人">
                <constraints nullable="false"/>
            </column>
            <column name="created_at" type="TIMESTAMP" remarks="创建日期">
                <constraints nullable="false"/>
            </column>
            <column name="updated_by" type="VARCHAR(100)" remarks="更新人">
                <constraints nullable="false"/>
            </column>
            <column name="updated_at" type="TIMESTAMP" remarks="更新日期">
                <constraints nullable="false"/>
            </column>
            <column name="is_deleted" type="TINYINT" remarks="是否删除 1：有效 0：无效">
                <constraints nullable="false"/>
            </column>
            <column name="version" type="INT" remarks="版本号">
                <constraints nullable="false"/>
            </column>
        </createTable>

        <addPrimaryKey columnNames="id" constraintName="pk_uaa_user_login_log" tableName="uaa_user_login_log"/>

        <createIndex indexName="idx_uaa_user_login_log_tenant_id" tableName="uaa_user_login_log">
            <column name="tenant_id" type="VARCHAR(32)"/>
        </createIndex>


        <createIndex indexName="idx_uaa_user_login_log_user_code" tableName="uaa_user_login_log">
            <column name="user_code" type="VARCHAR(30)"/>
        </createIndex>

        <addUniqueConstraint columnNames="user_code" constraintName="uk_user_code" tableName="uaa_user_login_log"/>
        <addUniqueConstraint columnNames="login_name" constraintName="uk_login_name" tableName="uaa_user_login_log"/>
    </changeSet>

</databaseChangeLog>
